<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="head">
            <div class="title">
                <h1 id="st">Steam</h1>
            </div>
            <div class="bt" id="btn-sign">
                <button>–í–æ–π—Ç–∏</button>
            </div>
            <div id="cart-modal" class="cart-modal">
                <div class="cart-icon" onclick="toggleCart()">
            üõí      <span id="cart-count">0</span>
                </div>
                <div class="cart-content">
                    <h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
                    <div id="cart-items"></div>
                    <div class="cart-total">–ò—Ç–æ–≥–æ: $<span id="total-price">0</span></div>
                    <button onclick="closeCart()">–ó–∞–∫—Ä—ã—Ç—å</button>
                    <button onclick="clearCart()">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
                </div>
            </div>
        </div>    
        <div class="links_btn">
            <div class="links">
                <ul>
                    <li><a href="–ì–ª–∞–≤–Ω–∞—è">–ú–∞–≥–∞–∑–∏–Ω</a></li>
                    <li><a href="–ò–≥—Ä—ã">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a></li>
                    <li><a href="–ö—É—Ä—Å">–î–µ–Ω—å–≥–∞</a></li> 
                    
                </ul>   
            </div>
        </div>
    </header>
    <main>
        <div class="main_container">
            <img id="BF" src="cfa2a28812f886cbcaefa41364fd14be.jpg">
           <div class="games_container">
                <div class="game_box">
                    <div class="game_image">
                        <img src="https://via.placeholder.com/300x200" alt="Ready or Not">
                    </div>
                    <div class="game_content">
                        <h3 class="game_title">Ready or Not</h3>
                        <p class="game_description">–ü–æ–ª–∏—Ü–∏—è –õ–æ—Å-–°—É—ç–Ω–æ—Å–∞ —Å–æ–æ–±—â–∞–µ—Ç –æ –≤—Å–ø–ª–µ—Å–∫–µ –ø—Ä–µ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤ –≥–æ—Ä–æ–¥–µ.</p>
                        <div class="game_price"><h1>-40%</h1>  Ã∂ Ã∂2Ã∂2Ã∂4Ã∂0Ã∂ Ã∂—ÄÃ∂—ÉÃ∂–±Ã∂.Ã∂ <p>1344 —Ä—É–±.</p></div>
                        <button class="buy_btn" onclick="addToCart('Ready or Not', 1344),toggleCart()" >
                            –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
                        </button>
                    </div>
                </div>
                                <div class="game_box">
                    <div class="game_image">
                        <img src="https://via.placeholder.com/300x200" alt="Detroit: Become Human">
                    </div>
                    <div class="game_content">
                        <h3 class="game_title">Detroit: Become Human</h3>
                        <p class="game_description">B –≤–∞—à–∏—Ö —Ä—É–∫–∞—Ö –æ–∫–∞–∂—É—Ç—Å—è —Å—É–¥—å–±—ã –∫–∞–∫ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞, —Ç–∞–∫ –∏ –∞–Ω–¥—Ä–æ–∏–¥–æ–≤.</p>
                        <div class="game_price"><h1>-80%</h1>  Ã∂1Ã∂3Ã∂0Ã∂0Ã∂ Ã∂—ÄÃ∂—ÉÃ∂–±Ã∂.Ã∂  <p>260 —Ä—É–±.</p></div>
                        <button class="buy_btn" onclick="addToCart('Detroit: Become Human', 260),toggleCart()" >
                            –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
                        </button>
                    </div>
                </div>
                                <div class="game_box">
                    <div class="game_image">
                        <img src="https://via.placeholder.com/300x200" alt="Cyberpunk 2077">
                    </div>
                    <div class="game_content">
                        <h3 class="game_title">Dispatch</h3>
                        <p class="game_description">–ö–æ–º–µ–¥–∏—è –æ —Ä–∞–±–æ—á–µ–º –º–µ—Å—Ç–µ —Å—É–ø–µ—Ä–≥–µ—Ä–æ–µ–≤, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤–∞—à –≤—ã–±–æ—Ä –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ.</p>
                        <div class="game_price">1100 —Ä—É–±.</div>
                        <button class="buy_btn" onclick="addToCart('Dispatch', 1100),toggleCart()" >
                            –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </main>
    <footer class="footer">
        <button id="loadData" onclick="onButtonClick()">–ü–æ–∫–∞–∑–∞—Ç—å –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç</button>
        <ul id="output">

        </ul>
    </footer>
    

    <script>
        let cart = [];

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
function addToCart(name, price) {
    const existingItem = cart.find(item => item.name === name);
    
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({
            name: name,
            price: price,
            quantity: 1
        });
    }
    
    updateCart();
    showNotification(`${name} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!`);
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã
function updateCart() {
    const cartCount = document.getElementById('cart-count');
    const cartItems = document.getElementById('cart-items');
    const totalPrice = document.getElementById('total-price');
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
    cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
    cartItems.innerHTML = '';
    cart.forEach(item => {
        const itemElement = document.createElement('div');
        itemElement.className = 'cart-item';
        itemElement.innerHTML = `
            <span>${item.name}</span>
            <span>${item.quantity} x $${item.price}</span>
        `;
        cartItems.appendChild(itemElement);
    });
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â—É—é —Å—É–º–º—É
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    totalPrice.textContent = total.toFixed(2);
}

// –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É
function toggleCart() {
    const modal = document.getElementById('cart-modal');
    const btn = document.getElementById('btn-sign');
    modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
}

function closeCart() {
    document.getElementById('cart-modal').style.display = 'none';
    const btn = document.getElementById('btn-sign');

}

// –û—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
function clearCart() {
    cart = [];
    updateCart();
    showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞!');
}

// –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
function showNotification(message) {
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: #4CAF50;
        color: white;
        padding: 10px 20px;
        border-radius: 5px;
        z-index: 1000;
    `;
    notification.textContent = message;
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.remove();
    }, 2000);
}



// –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', loadCart);



const loadDataButton = document.getElementById('loadData');

function onButtonClick(){
    const url = 'https://www.cbr-xml-daily.ru/daily_json.js'; // URL –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

    fetch(url)
        .then(response => {
            if (!response.ok) {
                throw new Error('–°–µ—Ç—å –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª–∞, —Å—Ç–∞—Ç—É—Å: ' + response.status);
            }
            return response.json(); // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Ç–≤–µ—Ç –≤ JSON
        })
        .then(data => {
            displayData(data); // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        })
        .catch(error => {
            console.error('–û—à–∏–±–∫–∞: ', error); // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        });
    }
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –∫—É—Ä—Å–∞—Ö –≤–∞–ª—é—Ç
function displayData(data) {
    const output = document.getElementById('output');
    output.innerHTML = ''; // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ

    const currencies = data.Valute; // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤–∞–ª—é—Ç

    Object.keys(currencies).forEach(key => {
        const currency = currencies[key];
        const currencyElement = document.createElement('li');
        currencyElement.innerHTML = `<strong>${currency.Name}</strong>: ${currency.Value.toFixed(2)} —Ä—É–±. (–ö—É—Ä—Å –∑–∞ ${currency.Previous.toFixed(2)} —Ä—É–±.)`;
        output.appendChild(currencyElement); // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
    });
}


    </script>
</body>
</html>